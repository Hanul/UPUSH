UPUSH.ANDROID_PUSH=METHOD(()=>{let e,n=require("node-gcm");return void 0!==NODE_CONFIG.UPUSH&&void 0!==NODE_CONFIG.UPUSH.Android&&(e=new n.Sender(NODE_CONFIG.UPUSH.Android.serverKey)),{run:i=>{let o=i.regId,d=i.data;void 0===d.channelId&&(d.channelId=NODE_CONFIG.UPUSH.Android.channelId);let O=new n.Message({delayWhileIdle:!1,timeToLive:1800,data:d});e.send(O,[o],5,(e,n)=>{})}}}),UPUSH.IOS_PUSH=METHOD(()=>{let e,n=require("apn");return void 0!==NODE_CONFIG.UPUSH&&void 0!==NODE_CONFIG.UPUSH.IOS&&(e=new n.Connection({cert:READ_FILE({path:NODE_CONFIG.UPUSH.IOS.certFilePath,isSync:!0}),key:READ_FILE({path:NODE_CONFIG.UPUSH.IOS.keyFilePath,isSync:!0}),production:NODE_CONFIG.UPUSH.isDebugMode!==!0,passphrase:NODE_CONFIG.UPUSH.IOS.password}),e.on("error",e=>{UPUSH.SHOW_ERROR("IOS_PUSH",e.toString())})),{run:i=>{let o=i.token,d=new n.Device(o),O=new n.Notification;O.badge=i.badge,O.sound="ping.aiff",O.alert=i.message,O.payload=void 0===i.data?{}:i.data,e.pushNotification(O,d)}}});