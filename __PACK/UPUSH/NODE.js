UPUSH.ANDROID_PUSH=METHOD(()=>{var t=require("fcm-node");let n;return void 0!==NODE_CONFIG.UPUSH&&void 0!==NODE_CONFIG.UPUSH.Android&&(n=new t(NODE_CONFIG.UPUSH.Android.serverKey)),{run:t=>{let e=t.regId,i=t.title,O=t.message;n.send({to:e,notification:{title:i,body:O}},(t,n)=>{})}}}),UPUSH.IOS_PUSH=METHOD(()=>{let t,n=require("apn");if(void 0!==NODE_CONFIG.UPUSH&&void 0!==NODE_CONFIG.UPUSH.IOS)try{t=new n.Provider({cert:READ_FILE({path:NODE_CONFIG.UPUSH.IOS.certFilePath,isSync:!0}),key:READ_FILE({path:NODE_CONFIG.UPUSH.IOS.keyFilePath,isSync:!0}),production:NODE_CONFIG.UPUSH.isDebugMode!==!0,passphrase:NODE_CONFIG.UPUSH.IOS.password})}catch(t){UPUSH.SHOW_ERROR("IOS_PUSH",t.toString())}return{run:e=>{if(void 0!==t){let i=e.token,O=new n.Notification;O.topic=NODE_CONFIG.UPUSH.IOS.appBundleId,O.badge=e.badge,O.sound="ping.aiff",O.alert=e.message,O.payload=void 0===e.data?{}:e.data,O.pushType="alert";try{t.send(O,[i]).then(t=>{}).catch(t=>{UPUSH.SHOW_ERROR("IOS_PUSH",t.toString())})}catch(t){UPUSH.SHOW_ERROR("IOS_PUSH",t.toString())}}}}});